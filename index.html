<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta property="og:image" content="https://ultraknight.github.io/tic-tac-toe/assets/screenshot.png" />
    <meta name="author" content="Vanderlei Ignacio Martins" />

    <meta property="og:title" content="Tic Tac Toe" />
    <meta
      property="og:description"
      content="Tic Tac Toe - classic game of Xs and Os. Challenge your friends in this fun and engaging game."
    />
    <meta property="og:url" content="https://ultraknight.github.io/tic-tac-toe/" />

    <link rel="manifest" href="manifest.json" />
    <title>Tic Tac Toe</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/x-icon" href="assets/icons/icon-128.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

    <script type="module">
      'serviceWorker' in navigator && navigator.serviceWorker.register('service-worker.js');
      import { initGame } from './init.js';
      import './installBtn.js';

      const gameController = initGame();
      const initGameWithNewSize = () => {
        const size = Number.parseInt(prompt('Enter grid size (3 to 10):', '3'));
        const newController = initGame(size);
        gameController.state = newController.state;
        gameController.view = newController.view;
        document.querySelector('.game-area').classList.remove('hidden');
        gameController.startGame();
      };

      document.getElementById('change-game-size-button').addEventListener('click', initGameWithNewSize);
    </script>
  </head>
  <body>
    <dialog id="start-dialog" open>
      <div>
        <h1>Tic Tac Toe</h1>
        <div>
          <label for="player1-name">O:</label>
          <input type="text" id="player1-name" maxlength="9" value="O" />
        </div>
        <div>
          <label for="player2-name">X:</label>
          <input type="text" id="player2-name" maxlength="9" value="X" />
        </div>
        <button class="start-button">New Game</button>
        <button id="install-btn" class="secondary" hidden>Install App</button>
      </div>
    </dialog>
    <dialog id="gameover-dialog">
      <div>
        <h1 class="winner"></h1>
        <h2 class="current-score"></h2>
        <button id="play-again-button">Revenge</button>
        <button class="start-button">New Game</button>
        <button id="change-game-size-button">Change Grid Size</button>
      </div>
    </dialog>
    <dialog id="help-dialog">
      <button>Close</button>
      <ul>
        <li>
          <img id="bomb" class="active" src="assets/icons/bomb.svg" alt="bomb" />
          <p>bomb - removes a random row from the board</p>
        </li>
        <li>
          <img id="shuffle" class="active" src="assets/icons/icon-128.png" alt="shuffle" />
          <p>shuffle - shuffles the current board state</p>
        </li>
        <li>
          <img id="change" class="active" src="assets/icons/change.svg" alt="change" />
          <p>
            change - changes one of your mark with the opponent's mark on the board, if there is only one symbol on the
            board, it will change it to the opposite symbol
          </p>
        </li>
      </ul>
    </dialog>
    <div class="game-area hidden">
      <h2 class="round-counter">Round 1</h2>
      <div class="players-labels">
        <h3 id="player1-label">O: 0</h3>
        <span id="left-arrow"><</span><span class="hidden" id="right-arrow">></span>
        <h3 id="player2-label">X: 0</h3>
      </div>
      <div id="board">
        <table>
          <tbody></tbody>
        </table>
        <div class="winner-marker"></div>
      </div>
      <div class="powers">
        <section class="powers-row">
          <img id="bomb" class="active" src="assets/icons/bomb.svg" alt="bomb" />
          <img id="shuffle" class="active" src="assets/icons/icon-128.png" alt="shuffle" />
          <img id="change" class="active" src="assets/icons/change.svg" alt="change" />
        </section>
      </div>
      <button id="help-button">?</button>
    </div>
  </body>
</html>
